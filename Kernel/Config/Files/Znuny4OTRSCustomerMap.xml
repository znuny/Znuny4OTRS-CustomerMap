<?xml version="1.0" encoding="utf-8"?>
<otrs_config version="1.0" init="Application">
    <ConfigItem Name="Frontend::Module###AgentCustomerMap" Required="0" Valid="1">
        <Description  Translatable="1">Frontend module registration for the AgentCustomerMap object in the agent interface.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Frontend::Agent::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Description>Agent CustomerMap</Description>
                <Title>Overview</Title>
                <NavBarName>CustomerMap</NavBarName>
                <Loader>
                    <JavaScript>Core.Agent.Znuny4OTRSCustomerMap.js</JavaScript>
                </Loader>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="DashboardBackend###0001-CustomerMap" Required="0" Valid="1">
        <Description Translatable="1">Parameters for the dashboard backend. "Group" are used to restriced access to the plugin (e. g. Group: admin;group1;group2;). "Default" means if the plugin is enabled per default or if the user needs to enable it manually. "CacheTTL" means the cache time in minutes for the plugin.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Frontend::Agent::Dashboard</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::Output::HTML::Dashboard::CustomerMap</Item>
                <Item Key="Title">Customer map</Item>
                <Item Key="MapsURL">//maps.google.com/maps/api/js?key=</Item>
                <Item Key="Block">ContentLarge</Item>
                <Item Key="Group"></Item>
                <Item Key="Default">1</Item>
                <Item Key="DefaultLatitude">35.546813</Item>
                <Item Key="DefaultLongitude">19.226562</Item>
                <Item Key="DefaultZoom">2</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Znuny4OTRSCustomerMapOnlyOpenTickets" Required="0" Valid="1">
        <Description Translatable="1">Show only open Tickets in customer map.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Option SelectedID="1">
                <Item Key="0">All Customers that ever had a Ticket</Item>
                <Item Key="1">Only Customers with open Tickets</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Znuny4OTRSCustomerMapCustomerDataAttributes" Required="0" Valid="1">
        <Description Translatable="1">Attributes used to get geolocation.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Hash>
                <Item Key="UserCity">UserCity</Item>
                <Item Key="UserStreet">UserStreet</Item>
                <Item Key="UserCountry">UserCountry</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Znuny4OTRSCustomerMapRequiredCustomerDataAttributes" Required="0" Valid="1">
        <Description Translatable="1">Attributes used to get geolocation.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Array>
                <Item>UserCity</Item>
            </Array>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Daemon::SchedulerCronTaskManager::Task###UpdateCustomerMap" Required="0" Valid="1" ConfigLevel="100">
        <Description Translatable="1">Updates the customer map based on addresses.</Description>
        <Group>Daemon</Group>
        <SubGroup>Daemon::SchedulerCronTaskManager::Task</SubGroup>
        <Setting>
            <Hash>
                <Item Key="TaskName">UpdateCustomerMap</Item>
                <Item Key="Schedule">45 3 * * *</Item> <!-- default every day at 03:45 AM -->
                <Item Key="Module">Kernel::System::GMapsCustomer</Item>
                <Item Key="Function">DataBuild</Item>
                <Item Key="MaximumParallelInstances">1</Item>
                <Item Key="Params">
                    <Array>
                    </Array>
                </Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Znuny4OTRSCustomerMapAddressCacheTTL" Required="0" Valid="1">
        <Description Translatable="1">Address cache time to live in days. 0 means no cache. Default is 30 days.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <String Regex="">30</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Znuny4OTRS::CustomerMap::GoogleAPIKey" Required="0" Valid="1">
        <Description Translatable="1">Required API key for using Google Maps and Geocoding API.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <String Regex=""></String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Loader::Agent::CommonJS###999-Znuny4OTRSCustomerMap" Required="0" Valid="1">
        <Description Translatable="1">List of JS files to always be loaded for the agent interface.</Description>
        <Group>Znuny4OTRS-CustomerMap</Group>
        <SubGroup>Core::Web</SubGroup>
        <Setting>
            <Array>
                <Item>Core.Agent.Znuny4OTRSCustomerMap.js</Item>
            </Array>
        </Setting>
    </ConfigItem>
</otrs_config>
